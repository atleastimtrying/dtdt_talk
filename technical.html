<!DOCTYPE>
<html>
  <head>
    <title>Drag the Dots - A Talk</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <script src='javascripts/jquery.js'></script>
    <script src="javascripts/app.js"></script>
  </head>
  <body>
    <section>
      <h2>What is Drag the Dots?</h2>
      <ul>
        <li>A simple mobile game</li>
        <li>Built with Phonegap</li>
        <li>Released in iOS and Google Play stores</li>
      </ul>
      <a href="http://localhost:8080/dots" class="decider" target="_blank" >Play</a>
    </section>
    <!-- play a game of dtd -->
    <section>
      <h2>How was it made?</h2>
      <ul>
        <li>Phonegap</li>
        <li>Single page app</li>
        <li>jQuery draggable/trig</li>
        <li>Coffeescript</li>
        <li>Event driven</li>
        <li>JSONP</li>
        <li>Local storage</li>
      </ul>
    </section>
    <section>
      <h2>Phonegap</h2>
      <ul>
        <li>Phonegap is a native wrapper around html/css/js</li>
        <li>Everything is in a webview with a few APIs</li>
        <li>Cross platform: iOS/Android/Windows phone/Blackberry etc</li>
        <li>Easy to write if you know html/css/js</li>
        <li>Lacks native ui/performance</li>
        <li>Ideal for go-it-alone projects</li>
      </ul>
      <a href="http://phonegap.com" class="decider" target="_blank" >Play</a>
    </section>
    <!-- phonegap website -->
    <section>
      <h2>Single page app</h2>
      <ul>
        <li>All the markup is in one page</li>
        <li>Use JS to show and hide divs as screens</li>
        <li>JS variables are persisted due to lack of page reloads</li>
        <li>Consistent styling/state</li>
        <li>No flashes of content</li>
        <li>Potential for using transitions</li>
      </ul>
    </section>
    <section>
      <h2>jQuery draggable/trig</h2>
      <ul>
        <li>Simple core game mechanic</li>
        <li>Started off by just dragging divs around</li>
        <li>Assigned each div a target to 'hit'</li>
        <li>Simple maths using x/y/radius to determine if they collide</li>
        <li>On collision trigger the next state</li>
      </ul>
    </section>
    <section>
      <h2>Coffeescript</h2>
      <ul>
        <li>Coffeescript is a language that compiles to javascript</li>
        <li>Each piece of divisible functionality is seperated into a Coffeescript class</li>
        <li>This structure has made it easier to add new functionality and improve bits without breaking the code</li>
        <li>An example of this is an experimental branch with multi touch instead of jquery ui draggable</li>
      </ul>
    </section>
    <section>
    <blockquote>
      <pre>
        class window.Collisions
          constructor: (obj)->
            $(obj).on 'has_collided', @has_collided
          has_collided: (event, obj)=>
            obj.fn @collison_test obj.item_1, obj.item_2
          collision: (obj1, obj2)->
            range = obj1.radius + obj2.radius
            xdiff = obj1.x - obj2.x
            ydiff = item1.y - item2.y
            dist = Math.sqrt (ydiff * ydiff) + (xdiff * xdiff)
            (dist < range)
        $(obj).trigger 'has_collided',
          fn: (result)-> console.log result 
          obj1:
            radius: 8
            x: 10
            y: 10
          obj2:
            radius: 8
            x: 30
            y: 30
      </pre>
    </blockquote>
    </section>
    <section>
      <h2>Event driven</h2>
      <ul>
        <li>To keep concerns seperated a lot of activity was bound to events</li>
        <li>These events allowed layouts gameplay ui screens and timers to be seperate</li>
        <li>Events made it easy to hook in analytics and storage of interaction data</li>
        <li>Events made for easy debugging, find the event that isn't firing and there's your bug!</li>
      </ul>
    </section>
    <section>
      <h2>JSONP</h2>
      <ul>
        <li>All of the communication with the server makes use of JSONP</li>
        <li>JSONP is a method by which you can aysnchronously communicate with a server that is not your own by wrapping data in a js function call</li>
        <li>Because Phonegap games are not served in a traditional sense there is no chance for CORS or similar</li>
        <li>Ideally in time I will replace these JSONP calls with built in game services from Apple/Google</li>
      </ul>
    </section>
    <section>
      <h2>Local storage</h2>
      <ul>
        <li>In order to persist data in Rhonegap you have to use the localstorage api</li>
        <li>It is a simple key/value pairing via a few basic commands</li>
        <li>The local high scores and preferences are stored in local storage</li>
        <li>Local storage can theoretically be lost at any point so you can't rely upon it</li>
      </ul>
    </section>
    <section>
      <h2>Release process</h2>
      <ul>
        <li>Phonegap build</li>
        <li>The cycle</li>
        <li>Testing</li>
      </ul>
    </section>
    
    <section>
      <h2>Phonegap build</h2>
      <ul>
        <li>Service provided by Phonegap</li>
        <li>Pulls and packages a github repo</li>
        <li>You provide certificates/provisioning</li>
        <li>Downloadable ipas/apks etc</li>
      </ul>
      <a href="http://build.phonegap.com" class="decider" target="_blank" >Play</a>
    </section>
    <section>
      <h2>The cycle</h2>
      <ul>
        <li>Write code</li>
        <li>Test code</li>
        <li>Push code</li>
        <li>Build code</li>
        <li>Test code</li>
        <li>Amend code</li>
        <li>Test code</li>
        <li>Release code</li>
      </ul>
    </section>
    <section>
      <h2>Testing</h2>
      <ul>
        <li>Host code locally on a server</li>
        <li>Test in Chrome first (as it's webkit)</li>
        <li>Test in iOS simulator</li>
        <li>Test on Android device in browser</li>
        <li>Phonegap build test</li>
        <li>Test on Android device (as an app)</li>
        <li>Test on iOS device (as an app)</li>
      </ul>
      <a href="http://localhost:8080/dots" class="decider" target="_blank" >Play</a>
    </section>
    <section>
      <h2>What next?</h2>
      <ul>
        <li>More releases</li>
        <li>Multiplayer locally (iPad)</li>
        <li>Better code formatting</li>
        <li>Colour themes</li>
      </ul>
    </section>
    <section>
      <h2>More releases</h2>
      <ul>
        <li>Getting back up to speed and a better pattern for releases is good</li>
        <li>Ideally every two weeks or so release new functionality</li>
        <li>Bundling releases too close is annoying for the user and exhausting for the developer</li>
        <li>Regular releases brings order</li>
      </ul>
    </section>
    <section>
      <h2>Multiplayer locally (iPad)</h2>
      <ul>
        <li>I want to engage more with tablet users</li>
        <li>Local multiplayer is lacking these days</li>
        <li>Game could be pushed in new directions</li>
      </ul>
    </section>
    <section>
      <h2>Better code formatting.</h2>
      <ul>
        <li>I think my code could be more modular and extensible</li>
        <li>I'd like to take some Drag the Dots code onto new projects without it affecting gameplay (screens etc)</li>
      </ul>
    </section>
    <section>
      <h2>Colour themes</h2>
      <ul>
        <li>Pretty colours!</li>
        <li>My colour schemes are pretty arbitrary</li>
        <li>Contributed/branded colour schemes can help promote worthy projects</li>
        <li>More choice for a user is often a good thing</li>
      </ul>
    </section>
    <section>
      <h2>Questions?</h2>
      <img src='images/gordon.jpg'>
    </section>
  </body>
</html>
